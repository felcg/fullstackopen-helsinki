(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(15),c=t.n(o),u=(t(21),t(4)),l=t(5),i=t(2),m=function(e){var n=e.searchTerm,t=e.handleSearch;return r.a.createElement("div",null,r.a.createElement("h2",null,"Search the book"),r.a.createElement("input",{name:"search",value:n,onChange:t}))},s=function(e){var n=e.addPerson,t=e.newPerson,a=e.handlePersonChange;return r.a.createElement("div",null,r.a.createElement("h2",null,"Add a new person to the book."),r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{name:"name",value:t.name,onChange:a}),"number:"," ",r.a.createElement("input",{name:"number",value:t.number,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},f=function(e){var n=e.message,t=e.type;return null===n?null:"error"===t?r.a.createElement("div",{style:{color:"red",fontStyle:"italic",fontSize:20,background:"black"}},n):r.a.createElement("div",{style:{color:"green",fontStyle:"italic",fontSize:20,background:"white"}},n)},d=function(e){var n=e.personsToShow,t=e.removePerson;return r.a.createElement("div",null,r.a.createElement("h2",null,"Contact List"),n.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",null,"Name: ",e.name),r.a.createElement("p",null,"Number: ",e.number),r.a.createElement("button",{onClick:function(){return n=e.id,a=e.name,void(window.confirm("Delete ".concat(a,"?"))&&t(n));var n,a}},"Remove"))})))},h=t(3),b=t.n(h),v="/api/persons",p=function(){return b.a.get(v).then((function(e){return e.data}))},E=function(e){return b.a.post(v,e).then((function(e){return e.data}))},w=function(e,n){return b.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return b.a.delete("".concat(v,"/").concat(e))},j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)({name:"",number:""}),h=Object(i.a)(c,2),b=h[0],v=h[1],j=Object(a.useState)(""),k=Object(i.a)(j,2),O=k[0],S=k[1],y=Object(a.useState)(!0),C=Object(i.a)(y,2),P=C[0],T=C[1],L=Object(a.useState)(null),z=Object(i.a)(L,2),D=z[0],J=z[1],N=Object(a.useState)(null),x=Object(i.a)(N,2),A=x[0],B=x[1];Object(a.useEffect)((function(){p().then((function(e){return o(e)}))}),[]);var I=P?t:t.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(f,{message:D}),r.a.createElement(f,{message:A,type:"error"}),r.a.createElement(m,{searchTerm:O,handleSearch:function(e){S(e.target.value),T(!1)}}),r.a.createElement(s,{addPerson:function(e){e.preventDefault();var n={name:b.name,number:b.number},a=t.filter((function(e){return e.name===b.name}));if(1===a.length){if(window.confirm("".concat(b.name," already in phonebook, do you want to update the number?"))){var r=a[0].id,c=Object(l.a)({},a[0],{number:b.number});w(r,c).then((function(e){o(t.map((function(n){return n.id!==r?n:e}))),J("".concat(c.name,"'s number was updated")),setTimeout((function(){J(null)}),5e3)}))}}else E(n).then((function(e){o(t.concat(n)),v({name:"",number:""}),J("".concat(n.name," was added to the phonebook")),setTimeout((function(){J(null)}),5e3)})).catch((function(e){B("".concat(e.response.data.error)),setTimeout((function(){B(null)}),5e3)}))},newPerson:b,handlePersonChange:function(e){var n=e.target.value;v(Object(l.a)({},b,Object(u.a)({},e.target.name,n)))}}),r.a.createElement(d,{personsToShow:I,removePerson:function(e){var n=t.find((function(n){return n.id===e}));g(e).then((function(){var a=t.filter((function(n){return n.id!==e}));o(a),J("".concat(n.name," was removed from the phonebook")),setTimeout((function(){J(null)}),5e3)})).catch((function(e){B("".concat(n.name," was already removed from the phonebook")),setTimeout((function(){B(null)}),5e3)}))}}))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.6d61187e.chunk.js.map